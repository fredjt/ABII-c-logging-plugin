//
// Created by Trent Tanchin on 10/4/24.
//

#ifndef ABII_C_LOGGING_PLUGIN_MATH_H
#define ABII_C_LOGGING_PLUGIN_MATH_H

#include <math.h>
#include <abii/libabii.h>

namespace abii
{
const defines_map math_fp_int_round = {
    {0, "FP_INT_UPWARD"},
    {1, "FP_INT_DOWNWARD"},
    {2, "FP_INT_TOWARDZERO"},
    {3, "FP_INT_TONEARESTFROMZERO"},
    {4, "FP_INT_TONEAREST"}
};

const defines_map math_fp_category = {
    {0, "FP_NAN"},
    {1, "FP_INFINITE"},
    {2, "FP_ZERO"},
    {3, "FP_SUBNORMAL"},
    {4, "FP_NORMAL"}
};

const defines_map math_err_mask = {
    {1, "MATH_ERRNO"},
    {2, "MATH_ERREXCEPT"}
};

const defines_map math_maxfloat = {
    {3.40282347e+38F, "MAXFLOAT"}
};

const defines_map math_const = {
    {2.7182818284590452354, "M_E"},
    {1.4426950408889634074, "M_LOG2E"},
    {0.43429448190325182765, "M_LOG10E"},
    {0.69314718055994530942, "M_LN2"},
    {2.30258509299404568402, "M_LN10"},
    {3.14159265358979323846, "M_PI"},
    {1.57079632679489661923, "M_PI_2"},
    {0.78539816339744830962, "M_PI_4"},
    {0.31830988618379067154, "M_1_PI"},
    {0.63661977236758134308, "M_2_PI"},
    {1.12837916709551257390, "M_2_SQRTPI"},
    {1.41421356237309504880, "M_SQRT2"},
    {0.70710678118654752440, "M_SQRT1_2"}
};

const defines_map math_constf = {
    {2.7182818284590452354f, "M_Ef"},
    {1.4426950408889634074f, "M_LOG2Ef"},
    {0.43429448190325182765f, "M_LOG10Ef"},
    {0.69314718055994530942f, "M_LN2f"},
    {2.30258509299404568402f, "M_LN10f"},
    {3.14159265358979323846f, "M_PIf"},
    {1.57079632679489661923f, "M_PI_2f"},
    {0.78539816339744830962f, "M_PI_4f"},
    {0.31830988618379067154f, "M_1_PIf"},
    {0.63661977236758134308f, "M_2_PIf"},
    {1.12837916709551257390f, "M_2_SQRTPIf"},
    {1.41421356237309504880f, "M_SQRT2f"},
    {0.70710678118654752440f, "M_SQRT1_2f"}
};

const defines_map math_constl = {
    {2.718281828459045235360287471352662498L, "M_El"},
    {1.442695040888963407359924681001892137L, "M_LOG2El"},
    {0.434294481903251827651128918916605082L, "M_LOG10El"},
    {0.693147180559945309417232121458176568L, "M_LN2l"},
    {2.302585092994045684017991454684364208L, "M_LN10l"},
    {3.141592653589793238462643383279502884L, "M_PIl"},
    {1.570796326794896619231321691639751442L, "M_PI_2l"},
    {0.785398163397448309615660845819875721L, "M_PI_4l"},
    {0.318309886183790671537767526745028724L, "M_1_PIl"},
    {0.636619772367581343075535053490057448L, "M_2_PIl"},
    {1.128379167095512573896158903121545172L, "M_2_SQRTPIl"},
    {1.414213562373095048801688724209698079L, "M_SQRT2l"},
    {0.707106781186547524400844362104849039L, "M_SQRT1_2l"}
};

const defines_map math_constf16 = {
    {2.718281828459045235360287471352662498f16, "M_Ef16"},
    {1.442695040888963407359924681001892137f16, "M_LOG2Ef16"},
    {0.434294481903251827651128918916605082f16, "M_LOG10Ef16"},
    {0.693147180559945309417232121458176568f16, "M_LN2f16"},
    {2.302585092994045684017991454684364208f16, "M_LN10f16"},
    {3.141592653589793238462643383279502884f16, "M_PIf16"},
    {1.570796326794896619231321691639751442f16, "M_PI_2f16"},
    {0.785398163397448309615660845819875721f16, "M_PI_4f16"},
    {0.318309886183790671537767526745028724f16, "M_1_PIf16"},
    {0.636619772367581343075535053490057448f16, "M_2_PIf16"},
    {1.128379167095512573896158903121545172f16, "M_2_SQRTPIf16"},
    {1.414213562373095048801688724209698079f16, "M_SQRT2f16"},
    {0.707106781186547524400844362104849039f16, "M_SQRT1_2f16"}
};

const defines_map math_constf32 = {
    {2.718281828459045235360287471352662498f32, "M_Ef32"},
    {1.442695040888963407359924681001892137f32, "M_LOG2Ef32"},
    {0.434294481903251827651128918916605082f32, "M_LOG10Ef32"},
    {0.693147180559945309417232121458176568f32, "M_LN2f32"},
    {2.302585092994045684017991454684364208f32, "M_LN10f32"},
    {3.141592653589793238462643383279502884f32, "M_PIf32"},
    {1.570796326794896619231321691639751442f32, "M_PI_2f32"},
    {0.785398163397448309615660845819875721f32, "M_PI_4f32"},
    {0.318309886183790671537767526745028724f32, "M_1_PIf32"},
    {0.636619772367581343075535053490057448f32, "M_2_PIf32"},
    {1.128379167095512573896158903121545172f32, "M_2_SQRTPIf32"},
    {1.414213562373095048801688724209698079f32, "M_SQRT2f32"},
    {0.707106781186547524400844362104849039f32, "M_SQRT1_2f32"}
};

const defines_map math_constf64 = {
    {2.718281828459045235360287471352662498f64, "M_Ef64"},
    {1.442695040888963407359924681001892137f64, "M_LOG2Ef64"},
    {0.434294481903251827651128918916605082f64, "M_LOG10Ef64"},
    {0.693147180559945309417232121458176568f64, "M_LN2f64"},
    {2.302585092994045684017991454684364208f64, "M_LN10f64"},
    {3.141592653589793238462643383279502884f64, "M_PIf64"},
    {1.570796326794896619231321691639751442f64, "M_PI_2f64"},
    {0.785398163397448309615660845819875721f64, "M_PI_4f64"},
    {0.318309886183790671537767526745028724f64, "M_1_PIf64"},
    {0.636619772367581343075535053490057448f64, "M_2_PIf64"},
    {1.128379167095512573896158903121545172f64, "M_2_SQRTPIf64"},
    {1.414213562373095048801688724209698079f64, "M_SQRT2f64"},
    {0.707106781186547524400844362104849039f64, "M_SQRT1_2f64"}
};

const defines_map math_constf128 = {
    {2.718281828459045235360287471352662498f128, "M_Ef128"},
    {1.442695040888963407359924681001892137f128, "M_LOG2Ef128"},
    {0.434294481903251827651128918916605082f128, "M_LOG10Ef128"},
    {0.693147180559945309417232121458176568f128, "M_LN2f128"},
    {2.302585092994045684017991454684364208f128, "M_LN10f128"},
    {3.141592653589793238462643383279502884f128, "M_PIf128"},
    {1.570796326794896619231321691639751442f128, "M_PI_2f128"},
    {0.785398163397448309615660845819875721f128, "M_PI_4f128"},
    {0.318309886183790671537767526745028724f128, "M_1_PIf128"},
    {0.636619772367581343075535053490057448f128, "M_2_PIf128"},
    {1.128379167095512573896158903121545172f128, "M_2_SQRTPIf128"},
    {1.414213562373095048801688724209698079f128, "M_SQRT2f128"},
    {0.707106781186547524400844362104849039f128, "M_SQRT1_2f128"}
};

const defines_map math_constf32x = {
    {2.718281828459045235360287471352662498f32x, "M_Ef32x"},
    {1.442695040888963407359924681001892137f32x, "M_LOG2Ef32x"},
    {0.434294481903251827651128918916605082f32x, "M_LOG10Ef32x"},
    {0.693147180559945309417232121458176568f32x, "M_LN2f32x"},
    {2.302585092994045684017991454684364208f32x, "M_LN10f32x"},
    {3.141592653589793238462643383279502884f32x, "M_PIf32x"},
    {1.570796326794896619231321691639751442f32x, "M_PI_2f32x"},
    {0.785398163397448309615660845819875721f32x, "M_PI_4f32x"},
    {0.318309886183790671537767526745028724f32x, "M_1_PIf32x"},
    {0.636619772367581343075535053490057448f32x, "M_2_PIf32x"},
    {1.128379167095512573896158903121545172f32x, "M_2_SQRTPIf32x"},
    {1.414213562373095048801688724209698079f32x, "M_SQRT2f32x"},
    {0.707106781186547524400844362104849039f32x, "M_SQRT1_2f32x"}
};

const defines_map math_constf64x = {
    {2.718281828459045235360287471352662498f64x, "M_Ef64x"},
    {1.442695040888963407359924681001892137f64x, "M_LOG2Ef64x"},
    {0.434294481903251827651128918916605082f64x, "M_LOG10Ef64x"},
    {0.693147180559945309417232121458176568f64x, "M_LN2f64x"},
    {2.302585092994045684017991454684364208f64x, "M_LN10f64x"},
    {3.141592653589793238462643383279502884f64x, "M_PIf64x"},
    {1.570796326794896619231321691639751442f64x, "M_PI_2f64x"},
    {0.785398163397448309615660845819875721f64x, "M_PI_4f64x"},
    {0.318309886183790671537767526745028724f64x, "M_1_PIf64x"},
    {0.636619772367581343075535053490057448f64x, "M_2_PIf64x"},
    {1.128379167095512573896158903121545172f64x, "M_2_SQRTPIf64x"},
    {1.414213562373095048801688724209698079f64x, "M_SQRT2f64x"},
    {0.707106781186547524400844362104849039f64x, "M_SQRT1_2f64x"}
};

template <typename T>
std::string print_math_fp_int_round(const T v)
{
    return print_enum_entry(v, math_fp_int_round);
}

template <typename T>
std::string print_math_fp_category(const T v)
{
    return print_enum_entry(v, math_fp_category);
}

template <typename T>
std::string print_math_err_mask(const T v)
{
    return print_or_enum_entries(v, math_err_mask);
}

template <typename T>
std::string print_math_maxfloat(const T v)
{
    return print_enum_entry(v, math_maxfloat);
}

template <typename T>
std::string print_math_const(const T v)
{
    return print_enum_entry(v, math_const);
}

template <typename T>
std::string print_math_constf(const T v)
{
    return print_enum_entry(v, math_constf);
}

template <typename T>
std::string print_math_constl(const T v)
{
    return print_enum_entry(v, math_constl);
}

template <typename T>
std::string print_math_constf16(const T v)
{
    return print_enum_entry(v, math_constf16);
}

template <typename T>
std::string print_math_constf32(const T v)
{
    return print_enum_entry(v, math_constf32);
}

template <typename T>
std::string print_math_constf64(const T v)
{
    return print_enum_entry(v, math_constf64);
}

template <typename T>
std::string print_math_constf128(const T v)
{
    return print_enum_entry(v, math_constf128);
}

template <typename T>
std::string print_math_constf32x(const T v)
{
    return print_enum_entry(v, math_constf32x);
}

template <typename T>
std::string print_math_constf64x(const T v)
{
    return print_enum_entry(v, math_constf64x);
}

template <typename T, typename U> requires std::is_same_v<std::remove_cvref_t<T>, struct __iseqsig_type<U>>
std::ostream& operator<<(std::ostream& os, T&& /*obj*/)
{
    OVERRIDE_STREAM_PREFIX
    OVERRIDE_STREAM_SUFFIX
}
}

#endif //ABII_C_LOGGING_PLUGIN_MATH_H
